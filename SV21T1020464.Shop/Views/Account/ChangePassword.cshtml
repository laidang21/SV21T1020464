
@{
    ViewBag.Title = "Đổi mật khẩu";
    var user = User.GetUserData();
}
<section class="section">
<div id="changePasswordSection" style="max-width: 400px; margin: 50px auto; padding: 20px; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); background-color: #fff;">
    <h3 class="text-center" style="margin-bottom: 20px; color: #333;">Đổi mật khẩu</h3>
    <form id="changePasswordForm" action="~/Account/ChangePassword" method="post" onsubmit="return validatePasswords();">
        <input type="hidden" name="userName" value="@user.UserName" />

        <!-- Mật khẩu cũ -->
        <div class="form-group">
            <label for="oldPassword" style="font-weight: bold;">Mật khẩu cũ:</label>
            <input type="password" class="form-control" id="oldPassword" name="oldPassword" required autofocus style="height: 40px; padding: 5px 10px; font-size: 14px;">
            @Html.ValidationMessage("oldPass", "", new { @class = "text-danger" })
        </div>

        <!-- Mật khẩu mới -->
        <div class="form-group">
            <label for="newPassword" style="font-weight: bold;">Mật khẩu mới:</label>
            <input type="password" class="form-control" id="newPassword" name="newPassword" required style="height: 40px; padding: 5px 10px; font-size: 14px;">
            @Html.ValidationMessage("newPass", "", new { @class = "text-danger" })
        </div>

        <!-- Xác nhận mật khẩu -->
        <div class="form-group">
            <label for="confirmPassword" style="font-weight: bold;">Xác nhận lại mật khẩu:</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required style="height: 40px; padding: 5px 10px; font-size: 14px;">
            @Html.ValidationMessage("confirmPass", "", new { @class = "text-danger" })
        </div>

        <!-- Thông báo lỗi -->
        <div id="passwordError" class="text-danger" style="display: none; margin-top: 10px;">Mật khẩu xác nhận không khớp!</div>

        <!-- Nút hành động -->
        <div class="form-group text-right" style="margin-top: 20px;">
            <button type="submit" class="btn btn-primary" style="padding: 10px 20px; font-size: 14px;">Đổi mật khẩu</button>
            <a href="~/" class="btn btn-secondary" style="padding: 10px 20px; font-size: 14px;">Bỏ qua</a>
        </div>
    </form>
</div>
    </section>

<script>
    function validatePasswords() {
        const newPassword = document.getElementById('newPassword').value;
        const confirmPassword = document.getElementById('confirmPassword').value;

        if (newPassword !== confirmPassword) {
            document.getElementById('passwordError').style.display = 'block';
            return false; // Ngăn không cho gửi form
        }

        document.getElementById('passwordError').style.display = 'none';
        return true; // Cho phép gửi form
    }
</script>
    
